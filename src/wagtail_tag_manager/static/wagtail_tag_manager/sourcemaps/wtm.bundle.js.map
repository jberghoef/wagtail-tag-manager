{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/js-cookie/src/js.cookie.js","webpack:///./node_modules/whatwg-fetch/fetch.js","webpack:///./frontend/client/components/cookie_bar.ts","webpack:///./frontend/client/components/trigger_monitor.ts","webpack:///./frontend/client/wtm.ts","webpack:///./frontend/client/components/tag_manager.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","factory","OldCookies","window","Cookies","api","noConflict","extend","result","arguments","length","attributes","decode","replace","decodeURIComponent","init","converter","set","document","path","defaults","expires","Date","toUTCString","JSON","stringify","test","e","write","encodeURIComponent","String","escape","stringifiedAttributes","attributeName","split","cookie","json","jar","cookies","parts","slice","join","charAt","read","parse","getJSON","remove","withConverter","support","self","Blob","viewClasses","isArrayBufferView","ArrayBuffer","isView","obj","indexOf","toString","normalizeName","TypeError","toLowerCase","normalizeValue","iteratorFor","items","iterator","next","shift","done","undefined","Headers","headers","this","map","forEach","append","Array","isArray","header","getOwnPropertyNames","consumed","body","bodyUsed","Promise","reject","fileReaderReady","reader","resolve","onload","onerror","error","readBlobAsArrayBuffer","blob","FileReader","promise","readAsArrayBuffer","bufferClone","buf","view","Uint8Array","byteLength","buffer","Body","_initBody","_bodyInit","_bodyText","isPrototypeOf","_bodyBlob","FormData","_bodyFormData","URLSearchParams","DataView","_bodyArrayBuffer","type","rejected","Error","arrayBuffer","then","text","readAsText","chars","fromCharCode","readArrayBufferAsText","formData","oldValue","has","callback","thisArg","keys","push","values","entries","methods","Request","input","options","method","upcased","url","credentials","signal","toUpperCase","referrer","form","trim","bytes","Response","bodyInit","status","ok","statusText","clone","response","redirectStatuses","redirect","RangeError","location","DOMException","err","message","stack","constructor","request","aborted","xhr","XMLHttpRequest","abortXhr","abort","rawHeaders","getAllResponseHeaders","line","responseURL","responseText","ontimeout","onabort","open","withCredentials","responseType","setRequestHeader","addEventListener","onreadystatechange","readyState","removeEventListener","send","polyfill","fetch","manager","el","getElementById","initialize","showCookieBar","hideCookieBar","classList","add","triggers","wtm","trigger","bindClickListener","bindVisibilityListener","bindFormSubmitListener","bindHistoryChangeListener","bindErrorListener","bindScrollListener","bindTimerListener","console","handleEvent","event","stopPropagation","target","sendTrigger","createElementID","querySelectorAll","element","rect","getBoundingClientRect","in_view","top","left","bottom","innerHeight","documentElement","clientHeight","right","innerWidth","clientWidth","slug","passive","preventDefault","submit","scrollPercentage","yScrollPercentage","xScrollPercentage","now","toISOString","setTimeout","setInterval","loadData","tag","tagName","ids","classes","attr","part","data","config","state","configUrl","getAttribute","config_url","lazyUrl","lazy_url","requestInit","cache","showCookiebar","loadConfig","item","validate","enabled","navigator","cookieEnabled","tag_types","tagType","catch","handleLoad","tags","createElement","setAttribute","appendChild","createTextNode","string","head"],"mappings":"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","file":"wtm.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 24);\n","/*!\n * JavaScript Cookie v2.2.1\n * https://github.com/js-cookie/js-cookie\n *\n * Copyright 2006, 2015 Klaus Hartl & Fagner Brack\n * Released under the MIT license\n */\n;(function (factory) {\n\tvar registeredInModuleLoader;\n\tif (typeof define === 'function' && define.amd) {\n\t\tdefine(factory);\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (typeof exports === 'object') {\n\t\tmodule.exports = factory();\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (!registeredInModuleLoader) {\n\t\tvar OldCookies = window.Cookies;\n\t\tvar api = window.Cookies = factory();\n\t\tapi.noConflict = function () {\n\t\t\twindow.Cookies = OldCookies;\n\t\t\treturn api;\n\t\t};\n\t}\n}(function () {\n\tfunction extend () {\n\t\tvar i = 0;\n\t\tvar result = {};\n\t\tfor (; i < arguments.length; i++) {\n\t\t\tvar attributes = arguments[ i ];\n\t\t\tfor (var key in attributes) {\n\t\t\t\tresult[key] = attributes[key];\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tfunction decode (s) {\n\t\treturn s.replace(/(%[0-9A-Z]{2})+/g, decodeURIComponent);\n\t}\n\n\tfunction init (converter) {\n\t\tfunction api() {}\n\n\t\tfunction set (key, value, attributes) {\n\t\t\tif (typeof document === 'undefined') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tattributes = extend({\n\t\t\t\tpath: '/'\n\t\t\t}, api.defaults, attributes);\n\n\t\t\tif (typeof attributes.expires === 'number') {\n\t\t\t\tattributes.expires = new Date(new Date() * 1 + attributes.expires * 864e+5);\n\t\t\t}\n\n\t\t\t// We're using \"expires\" because \"max-age\" is not supported by IE\n\t\t\tattributes.expires = attributes.expires ? attributes.expires.toUTCString() : '';\n\n\t\t\ttry {\n\t\t\t\tvar result = JSON.stringify(value);\n\t\t\t\tif (/^[\\{\\[]/.test(result)) {\n\t\t\t\t\tvalue = result;\n\t\t\t\t}\n\t\t\t} catch (e) {}\n\n\t\t\tvalue = converter.write ?\n\t\t\t\tconverter.write(value, key) :\n\t\t\t\tencodeURIComponent(String(value))\n\t\t\t\t\t.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent);\n\n\t\t\tkey = encodeURIComponent(String(key))\n\t\t\t\t.replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent)\n\t\t\t\t.replace(/[\\(\\)]/g, escape);\n\n\t\t\tvar stringifiedAttributes = '';\n\t\t\tfor (var attributeName in attributes) {\n\t\t\t\tif (!attributes[attributeName]) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tstringifiedAttributes += '; ' + attributeName;\n\t\t\t\tif (attributes[attributeName] === true) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Considers RFC 6265 section 5.2:\n\t\t\t\t// ...\n\t\t\t\t// 3.  If the remaining unparsed-attributes contains a %x3B (\";\")\n\t\t\t\t//     character:\n\t\t\t\t// Consume the characters of the unparsed-attributes up to,\n\t\t\t\t// not including, the first %x3B (\";\") character.\n\t\t\t\t// ...\n\t\t\t\tstringifiedAttributes += '=' + attributes[attributeName].split(';')[0];\n\t\t\t}\n\n\t\t\treturn (document.cookie = key + '=' + value + stringifiedAttributes);\n\t\t}\n\n\t\tfunction get (key, json) {\n\t\t\tif (typeof document === 'undefined') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar jar = {};\n\t\t\t// To prevent the for loop in the first place assign an empty array\n\t\t\t// in case there are no cookies at all.\n\t\t\tvar cookies = document.cookie ? document.cookie.split('; ') : [];\n\t\t\tvar i = 0;\n\n\t\t\tfor (; i < cookies.length; i++) {\n\t\t\t\tvar parts = cookies[i].split('=');\n\t\t\t\tvar cookie = parts.slice(1).join('=');\n\n\t\t\t\tif (!json && cookie.charAt(0) === '\"') {\n\t\t\t\t\tcookie = cookie.slice(1, -1);\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tvar name = decode(parts[0]);\n\t\t\t\t\tcookie = (converter.read || converter)(cookie, name) ||\n\t\t\t\t\t\tdecode(cookie);\n\n\t\t\t\t\tif (json) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tcookie = JSON.parse(cookie);\n\t\t\t\t\t\t} catch (e) {}\n\t\t\t\t\t}\n\n\t\t\t\t\tjar[name] = cookie;\n\n\t\t\t\t\tif (key === name) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\t\t\t}\n\n\t\t\treturn key ? jar[key] : jar;\n\t\t}\n\n\t\tapi.set = set;\n\t\tapi.get = function (key) {\n\t\t\treturn get(key, false /* read as raw */);\n\t\t};\n\t\tapi.getJSON = function (key) {\n\t\t\treturn get(key, true /* read as json */);\n\t\t};\n\t\tapi.remove = function (key, attributes) {\n\t\t\tset(key, '', extend(attributes, {\n\t\t\t\texpires: -1\n\t\t\t}));\n\t\t};\n\n\t\tapi.defaults = {};\n\n\t\tapi.withConverter = init;\n\n\t\treturn api;\n\t}\n\n\treturn init(function () {});\n}));\n","var support = {\n  searchParams: 'URLSearchParams' in self,\n  iterable: 'Symbol' in self && 'iterator' in Symbol,\n  blob:\n    'FileReader' in self &&\n    'Blob' in self &&\n    (function() {\n      try {\n        new Blob()\n        return true\n      } catch (e) {\n        return false\n      }\n    })(),\n  formData: 'FormData' in self,\n  arrayBuffer: 'ArrayBuffer' in self\n}\n\nfunction isDataView(obj) {\n  return obj && DataView.prototype.isPrototypeOf(obj)\n}\n\nif (support.arrayBuffer) {\n  var viewClasses = [\n    '[object Int8Array]',\n    '[object Uint8Array]',\n    '[object Uint8ClampedArray]',\n    '[object Int16Array]',\n    '[object Uint16Array]',\n    '[object Int32Array]',\n    '[object Uint32Array]',\n    '[object Float32Array]',\n    '[object Float64Array]'\n  ]\n\n  var isArrayBufferView =\n    ArrayBuffer.isView ||\n    function(obj) {\n      return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n    }\n}\n\nfunction normalizeName(name) {\n  if (typeof name !== 'string') {\n    name = String(name)\n  }\n  if (/[^a-z0-9\\-#$%&'*+.^_`|~]/i.test(name)) {\n    throw new TypeError('Invalid character in header field name')\n  }\n  return name.toLowerCase()\n}\n\nfunction normalizeValue(value) {\n  if (typeof value !== 'string') {\n    value = String(value)\n  }\n  return value\n}\n\n// Build a destructive iterator for the value list\nfunction iteratorFor(items) {\n  var iterator = {\n    next: function() {\n      var value = items.shift()\n      return {done: value === undefined, value: value}\n    }\n  }\n\n  if (support.iterable) {\n    iterator[Symbol.iterator] = function() {\n      return iterator\n    }\n  }\n\n  return iterator\n}\n\nexport function Headers(headers) {\n  this.map = {}\n\n  if (headers instanceof Headers) {\n    headers.forEach(function(value, name) {\n      this.append(name, value)\n    }, this)\n  } else if (Array.isArray(headers)) {\n    headers.forEach(function(header) {\n      this.append(header[0], header[1])\n    }, this)\n  } else if (headers) {\n    Object.getOwnPropertyNames(headers).forEach(function(name) {\n      this.append(name, headers[name])\n    }, this)\n  }\n}\n\nHeaders.prototype.append = function(name, value) {\n  name = normalizeName(name)\n  value = normalizeValue(value)\n  var oldValue = this.map[name]\n  this.map[name] = oldValue ? oldValue + ', ' + value : value\n}\n\nHeaders.prototype['delete'] = function(name) {\n  delete this.map[normalizeName(name)]\n}\n\nHeaders.prototype.get = function(name) {\n  name = normalizeName(name)\n  return this.has(name) ? this.map[name] : null\n}\n\nHeaders.prototype.has = function(name) {\n  return this.map.hasOwnProperty(normalizeName(name))\n}\n\nHeaders.prototype.set = function(name, value) {\n  this.map[normalizeName(name)] = normalizeValue(value)\n}\n\nHeaders.prototype.forEach = function(callback, thisArg) {\n  for (var name in this.map) {\n    if (this.map.hasOwnProperty(name)) {\n      callback.call(thisArg, this.map[name], name, this)\n    }\n  }\n}\n\nHeaders.prototype.keys = function() {\n  var items = []\n  this.forEach(function(value, name) {\n    items.push(name)\n  })\n  return iteratorFor(items)\n}\n\nHeaders.prototype.values = function() {\n  var items = []\n  this.forEach(function(value) {\n    items.push(value)\n  })\n  return iteratorFor(items)\n}\n\nHeaders.prototype.entries = function() {\n  var items = []\n  this.forEach(function(value, name) {\n    items.push([name, value])\n  })\n  return iteratorFor(items)\n}\n\nif (support.iterable) {\n  Headers.prototype[Symbol.iterator] = Headers.prototype.entries\n}\n\nfunction consumed(body) {\n  if (body.bodyUsed) {\n    return Promise.reject(new TypeError('Already read'))\n  }\n  body.bodyUsed = true\n}\n\nfunction fileReaderReady(reader) {\n  return new Promise(function(resolve, reject) {\n    reader.onload = function() {\n      resolve(reader.result)\n    }\n    reader.onerror = function() {\n      reject(reader.error)\n    }\n  })\n}\n\nfunction readBlobAsArrayBuffer(blob) {\n  var reader = new FileReader()\n  var promise = fileReaderReady(reader)\n  reader.readAsArrayBuffer(blob)\n  return promise\n}\n\nfunction readBlobAsText(blob) {\n  var reader = new FileReader()\n  var promise = fileReaderReady(reader)\n  reader.readAsText(blob)\n  return promise\n}\n\nfunction readArrayBufferAsText(buf) {\n  var view = new Uint8Array(buf)\n  var chars = new Array(view.length)\n\n  for (var i = 0; i < view.length; i++) {\n    chars[i] = String.fromCharCode(view[i])\n  }\n  return chars.join('')\n}\n\nfunction bufferClone(buf) {\n  if (buf.slice) {\n    return buf.slice(0)\n  } else {\n    var view = new Uint8Array(buf.byteLength)\n    view.set(new Uint8Array(buf))\n    return view.buffer\n  }\n}\n\nfunction Body() {\n  this.bodyUsed = false\n\n  this._initBody = function(body) {\n    this._bodyInit = body\n    if (!body) {\n      this._bodyText = ''\n    } else if (typeof body === 'string') {\n      this._bodyText = body\n    } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n      this._bodyBlob = body\n    } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n      this._bodyFormData = body\n    } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n      this._bodyText = body.toString()\n    } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n      this._bodyArrayBuffer = bufferClone(body.buffer)\n      // IE 10-11 can't handle a DataView body.\n      this._bodyInit = new Blob([this._bodyArrayBuffer])\n    } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n      this._bodyArrayBuffer = bufferClone(body)\n    } else {\n      this._bodyText = body = Object.prototype.toString.call(body)\n    }\n\n    if (!this.headers.get('content-type')) {\n      if (typeof body === 'string') {\n        this.headers.set('content-type', 'text/plain;charset=UTF-8')\n      } else if (this._bodyBlob && this._bodyBlob.type) {\n        this.headers.set('content-type', this._bodyBlob.type)\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8')\n      }\n    }\n  }\n\n  if (support.blob) {\n    this.blob = function() {\n      var rejected = consumed(this)\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return Promise.resolve(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as blob')\n      } else {\n        return Promise.resolve(new Blob([this._bodyText]))\n      }\n    }\n\n    this.arrayBuffer = function() {\n      if (this._bodyArrayBuffer) {\n        return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n      } else {\n        return this.blob().then(readBlobAsArrayBuffer)\n      }\n    }\n  }\n\n  this.text = function() {\n    var rejected = consumed(this)\n    if (rejected) {\n      return rejected\n    }\n\n    if (this._bodyBlob) {\n      return readBlobAsText(this._bodyBlob)\n    } else if (this._bodyArrayBuffer) {\n      return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n    } else if (this._bodyFormData) {\n      throw new Error('could not read FormData body as text')\n    } else {\n      return Promise.resolve(this._bodyText)\n    }\n  }\n\n  if (support.formData) {\n    this.formData = function() {\n      return this.text().then(decode)\n    }\n  }\n\n  this.json = function() {\n    return this.text().then(JSON.parse)\n  }\n\n  return this\n}\n\n// HTTP methods whose capitalization should be normalized\nvar methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\nfunction normalizeMethod(method) {\n  var upcased = method.toUpperCase()\n  return methods.indexOf(upcased) > -1 ? upcased : method\n}\n\nexport function Request(input, options) {\n  options = options || {}\n  var body = options.body\n\n  if (input instanceof Request) {\n    if (input.bodyUsed) {\n      throw new TypeError('Already read')\n    }\n    this.url = input.url\n    this.credentials = input.credentials\n    if (!options.headers) {\n      this.headers = new Headers(input.headers)\n    }\n    this.method = input.method\n    this.mode = input.mode\n    this.signal = input.signal\n    if (!body && input._bodyInit != null) {\n      body = input._bodyInit\n      input.bodyUsed = true\n    }\n  } else {\n    this.url = String(input)\n  }\n\n  this.credentials = options.credentials || this.credentials || 'same-origin'\n  if (options.headers || !this.headers) {\n    this.headers = new Headers(options.headers)\n  }\n  this.method = normalizeMethod(options.method || this.method || 'GET')\n  this.mode = options.mode || this.mode || null\n  this.signal = options.signal || this.signal\n  this.referrer = null\n\n  if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n    throw new TypeError('Body not allowed for GET or HEAD requests')\n  }\n  this._initBody(body)\n}\n\nRequest.prototype.clone = function() {\n  return new Request(this, {body: this._bodyInit})\n}\n\nfunction decode(body) {\n  var form = new FormData()\n  body\n    .trim()\n    .split('&')\n    .forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=')\n        var name = split.shift().replace(/\\+/g, ' ')\n        var value = split.join('=').replace(/\\+/g, ' ')\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n  return form\n}\n\nfunction parseHeaders(rawHeaders) {\n  var headers = new Headers()\n  // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n  // https://tools.ietf.org/html/rfc7230#section-3.2\n  var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ')\n  preProcessedHeaders.split(/\\r?\\n/).forEach(function(line) {\n    var parts = line.split(':')\n    var key = parts.shift().trim()\n    if (key) {\n      var value = parts.join(':').trim()\n      headers.append(key, value)\n    }\n  })\n  return headers\n}\n\nBody.call(Request.prototype)\n\nexport function Response(bodyInit, options) {\n  if (!options) {\n    options = {}\n  }\n\n  this.type = 'default'\n  this.status = options.status === undefined ? 200 : options.status\n  this.ok = this.status >= 200 && this.status < 300\n  this.statusText = 'statusText' in options ? options.statusText : 'OK'\n  this.headers = new Headers(options.headers)\n  this.url = options.url || ''\n  this._initBody(bodyInit)\n}\n\nBody.call(Response.prototype)\n\nResponse.prototype.clone = function() {\n  return new Response(this._bodyInit, {\n    status: this.status,\n    statusText: this.statusText,\n    headers: new Headers(this.headers),\n    url: this.url\n  })\n}\n\nResponse.error = function() {\n  var response = new Response(null, {status: 0, statusText: ''})\n  response.type = 'error'\n  return response\n}\n\nvar redirectStatuses = [301, 302, 303, 307, 308]\n\nResponse.redirect = function(url, status) {\n  if (redirectStatuses.indexOf(status) === -1) {\n    throw new RangeError('Invalid status code')\n  }\n\n  return new Response(null, {status: status, headers: {location: url}})\n}\n\nexport var DOMException = self.DOMException\ntry {\n  new DOMException()\n} catch (err) {\n  DOMException = function(message, name) {\n    this.message = message\n    this.name = name\n    var error = Error(message)\n    this.stack = error.stack\n  }\n  DOMException.prototype = Object.create(Error.prototype)\n  DOMException.prototype.constructor = DOMException\n}\n\nexport function fetch(input, init) {\n  return new Promise(function(resolve, reject) {\n    var request = new Request(input, init)\n\n    if (request.signal && request.signal.aborted) {\n      return reject(new DOMException('Aborted', 'AbortError'))\n    }\n\n    var xhr = new XMLHttpRequest()\n\n    function abortXhr() {\n      xhr.abort()\n    }\n\n    xhr.onload = function() {\n      var options = {\n        status: xhr.status,\n        statusText: xhr.statusText,\n        headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n      }\n      options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL')\n      var body = 'response' in xhr ? xhr.response : xhr.responseText\n      resolve(new Response(body, options))\n    }\n\n    xhr.onerror = function() {\n      reject(new TypeError('Network request failed'))\n    }\n\n    xhr.ontimeout = function() {\n      reject(new TypeError('Network request failed'))\n    }\n\n    xhr.onabort = function() {\n      reject(new DOMException('Aborted', 'AbortError'))\n    }\n\n    xhr.open(request.method, request.url, true)\n\n    if (request.credentials === 'include') {\n      xhr.withCredentials = true\n    } else if (request.credentials === 'omit') {\n      xhr.withCredentials = false\n    }\n\n    if ('responseType' in xhr && support.blob) {\n      xhr.responseType = 'blob'\n    }\n\n    request.headers.forEach(function(value, name) {\n      xhr.setRequestHeader(name, value)\n    })\n\n    if (request.signal) {\n      request.signal.addEventListener('abort', abortXhr)\n\n      xhr.onreadystatechange = function() {\n        // DONE (success or failure)\n        if (xhr.readyState === 4) {\n          request.signal.removeEventListener('abort', abortXhr)\n        }\n      }\n    }\n\n    xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n  })\n}\n\nfetch.polyfill = true\n\nif (!self.fetch) {\n  self.fetch = fetch\n  self.Headers = Headers\n  self.Request = Request\n  self.Response = Response\n}\n","import \"./cookie_bar.scss\";\n\nimport TagManager from \"./tag_manager\";\n\nexport default class CookieBar {\n  manager: TagManager;\n  el: HTMLElement;\n\n  constructor(manager: TagManager) {\n    this.manager = manager;\n    this.el = document.getElementById(\"wtm_cookie_bar\");\n\n    this.initialize = this.initialize.bind(this);\n    this.showCookieBar = this.showCookieBar.bind(this);\n    this.hideCookieBar = this.hideCookieBar.bind(this);\n\n    if (this.el) {\n      this.initialize();\n    }\n  }\n\n  initialize() {\n    this.showCookieBar();\n  }\n\n  showCookieBar() {\n    this.el.classList.remove(\"hidden\");\n  }\n\n  hideCookieBar() {\n    this.el.classList.add(\"hidden\");\n  }\n}\n","import TagManager from \"./tag_manager\";\n\nconst CLICK_ALL_ELEMENTS = \"click_all_elements\";\nconst CLICK_SOME_ELEMENTS = \"click_some_elements\";\nconst VISIBILITY_ONCE_PER_PAGE = \"visibility_once_per_page\";\nconst VISIBILITY_ONCE_PER_ELEMENT = \"visibility_once_per_element\";\nconst VISIBILITY_RECURRING = \"visibility_recurring\";\nconst FORM_SUBMIT = \"form_submit\";\nconst HISTORY_CHANGE = \"history_change\";\nconst JAVASCRIPT_ERROR = \"javascript_error\";\nconst SCROLL_VERTICAL = \"scroll_vertical\";\nconst SCROLL_HORIZONTAL = \"scroll_horizontal\";\nconst TIMER_TIMEOUT = \"timer_timeout\";\nconst TIMER_INTERVAL = \"timer_interval\";\n\nexport interface Trigger {\n  slug: string;\n  type: string;\n  value: any;\n}\n\nexport interface TriggerableHTMLElement extends HTMLElement {\n  wtm: { [key: string]: boolean };\n}\n\nexport default class TriggerMonitor {\n  manager: TagManager;\n  triggers: [Trigger];\n  wtm: { [key: string]: boolean };\n\n  constructor(manager: TagManager, triggers: [Trigger]) {\n    this.manager = manager;\n    this.triggers = triggers;\n    this.wtm = {};\n\n    this.initialize = this.initialize.bind(this);\n\n    this.initialize();\n  }\n\n  initialize() {\n    for (const trigger of this.triggers) {\n      switch (trigger.type) {\n        case CLICK_ALL_ELEMENTS:\n        case CLICK_SOME_ELEMENTS:\n          this.bindClickListener(trigger);\n          break;\n        case VISIBILITY_ONCE_PER_PAGE:\n        case VISIBILITY_ONCE_PER_ELEMENT:\n        case VISIBILITY_RECURRING:\n          this.bindVisibilityListener(trigger);\n          break;\n        case FORM_SUBMIT:\n          this.bindFormSubmitListener(trigger);\n          break;\n        case HISTORY_CHANGE:\n          this.bindHistoryChangeListener(trigger);\n          break;\n        case JAVASCRIPT_ERROR:\n          this.bindErrorListener(trigger);\n          break;\n        case SCROLL_VERTICAL:\n        case SCROLL_HORIZONTAL:\n          this.bindScrollListener(trigger);\n          break;\n        case TIMER_TIMEOUT:\n        case TIMER_INTERVAL:\n          this.bindTimerListener(trigger);\n          break;\n        default:\n          console.error(`trigger type '${trigger.type}' not implemented.`);\n          break;\n      }\n    }\n  }\n\n  bindClickListener(trigger: Trigger) {\n    const handleEvent = (event: MouseEvent) => {\n      event.stopPropagation();\n      const target = event.target as HTMLElement;\n      this.sendTrigger(trigger, this.createElementID(target));\n    };\n\n    if (trigger.type === CLICK_ALL_ELEMENTS) {\n      document.addEventListener(\"click\", handleEvent);\n    } else if (trigger.type === CLICK_SOME_ELEMENTS) {\n      [].forEach.call(document.querySelectorAll(trigger.value), (element: HTMLElement) => {\n        element.addEventListener(\"click\", handleEvent);\n      });\n    }\n  }\n\n  bindVisibilityListener(trigger: Trigger) {\n    const handleEvent = (event: Event) => {\n      [].forEach.call(\n        document.querySelectorAll(trigger.value),\n        (element: TriggerableHTMLElement) => {\n          const rect = element.getBoundingClientRect();\n          const in_view =\n            rect.top >= 0 &&\n            rect.left >= 0 &&\n            rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&\n            rect.right <= (window.innerWidth || document.documentElement.clientWidth);\n\n          if (element.wtm == undefined) element.wtm = {};\n          if (in_view) {\n            if (trigger.type === VISIBILITY_ONCE_PER_PAGE && !this.wtm[trigger.slug]) {\n              this.wtm[trigger.slug] = true;\n              this.sendTrigger(trigger, this.createElementID(element));\n            } else if (trigger.type === VISIBILITY_ONCE_PER_ELEMENT && !element.wtm[trigger.slug]) {\n              element.wtm[trigger.slug] = true;\n              this.sendTrigger(trigger, this.createElementID(element));\n            } else if (trigger.type === VISIBILITY_RECURRING && !element.wtm[trigger.slug]) {\n              element.wtm[trigger.slug] = true;\n              this.sendTrigger(trigger, this.createElementID(element));\n            }\n          } else if (trigger.type === VISIBILITY_RECURRING) {\n            element.wtm[trigger.slug] = false;\n          }\n        }\n      );\n    };\n\n    document.addEventListener(\"load\", handleEvent, { passive: false });\n    document.addEventListener(\"scroll\", handleEvent, { passive: true });\n    document.addEventListener(\"resize\", handleEvent, { passive: true });\n  }\n\n  bindFormSubmitListener(trigger: Trigger) {\n    const handleEvent = (event: Event) => {\n      event.preventDefault();\n      const target = event.target as HTMLFormElement;\n      this.sendTrigger(trigger, this.createElementID(target));\n      target.submit();\n    };\n\n    [].forEach.call(document.querySelectorAll(\"form\"), (element: HTMLElement) => {\n      element.addEventListener(\"submit\", handleEvent, { passive: false });\n    });\n  }\n\n  bindHistoryChangeListener(trigger: Trigger) {\n    const handleEvent = (event: PopStateEvent) => {\n      this.sendTrigger(trigger, event.type);\n    };\n\n    window.addEventListener(\"popstate\", handleEvent);\n  }\n\n  bindErrorListener(trigger: Trigger) {\n    const handleEvent = (event: ErrorEvent) => {\n      this.sendTrigger(trigger, event.message);\n    };\n    window.addEventListener(\"error\", handleEvent);\n  }\n\n  bindScrollListener(trigger: Trigger) {\n    const handleEvent = () => {\n      let scrollPercentage = -1000;\n      if (trigger.type === SCROLL_VERTICAL) {\n        scrollPercentage = this.yScrollPercentage;\n      } else if (trigger.type === SCROLL_HORIZONTAL) {\n        scrollPercentage = this.xScrollPercentage;\n      }\n\n      if (scrollPercentage >= trigger.value && !this.wtm[trigger.slug]) {\n        this.wtm[trigger.slug] = true;\n        this.sendTrigger(trigger, scrollPercentage);\n      } else if (scrollPercentage < trigger.value) {\n        this.wtm[trigger.slug] = false;\n      }\n    };\n\n    document.addEventListener(\"scroll\", handleEvent, { passive: true });\n  }\n\n  bindTimerListener(trigger: Trigger) {\n    const handleEvent = () => {\n      const now = new Date();\n      this.sendTrigger(trigger, now.toISOString());\n    };\n\n    if (trigger.type === TIMER_TIMEOUT) {\n      window.setTimeout(handleEvent, trigger.value);\n    } else if (trigger.type === TIMER_INTERVAL) {\n      window.setInterval(handleEvent, trigger.value);\n    }\n  }\n\n  sendTrigger(trigger: Trigger, value: string | number) {\n    trigger.value = value;\n    this.manager.loadData(trigger);\n  }\n\n  get yScrollPercentage() {\n    const distance = document.documentElement[\"scrollTop\"] || document.body[\"scrollTop\"];\n    const offset =\n      (document.documentElement[\"scrollHeight\"] || document.body[\"scrollHeight\"]) -\n      document.documentElement.clientHeight;\n    return (distance / offset) * 100;\n  }\n\n  get xScrollPercentage() {\n    const distance = document.documentElement[\"scrollLeft\"] || document.body[\"scrollLeft\"];\n    const offset =\n      (document.documentElement[\"scrollWidth\"] || document.body[\"scrollWidth\"]) -\n      document.documentElement.clientHeight;\n    return (distance / offset) * 100;\n  }\n\n  createElementID(el: HTMLElement) {\n    const tag = el.tagName.toLowerCase();\n    const ids: [string?] = [];\n    const classes: [string?] = [];\n    const attributes: [string?] = [];\n\n    [].forEach.call(el.attributes, (attr: any) => {\n      const { name, value } = attr;\n      switch (name) {\n        case \"id\":\n          for (let part of value.split(\" \")) {\n            if (part) ids.push(`#${part}`);\n          }\n          break;\n        case \"class\":\n          for (let part of value.split(\" \")) {\n            if (part) classes.push(`.${part}`);\n          }\n          break;\n        default:\n          attributes.push(`[${name}=${value}]`);\n          break;\n      }\n    });\n\n    return tag + ids.join(\"\") + classes.join(\"\") + attributes.join(\"\");\n  }\n}\n","import TagManager from \"./components/tag_manager\";\n\n(function () {\n  new TagManager();\n})();\n","import * as Cookies from \"js-cookie\";\nimport \"whatwg-fetch\";\nimport CookieBar from \"./cookie_bar\";\nimport TriggerMonitor from \"./trigger_monitor\";\n\nimport { Trigger } from \"./trigger_monitor\";\n\nexport interface WTMWindow extends Window {\n  wtm: {\n    config_url: string;\n    lazy_url: string;\n  };\n}\n\nexport interface Tag {\n  name: string;\n  attributes: {\n    [s: string]: string;\n  };\n  string: string;\n}\n\nexport default class TagManager {\n  window: WTMWindow = window as WTMWindow;\n\n  configUrl: string;\n  lazyUrl: string;\n\n  showCookiebar: boolean;\n  requestInit: RequestInit;\n  data: { [s: string]: any } = {};\n  config: { [s: string]: any } = {};\n  state: { [s: string]: any } = {};\n\n  constructor() {\n    const { body } = document;\n\n    this.configUrl = body.getAttribute(\"data-wtm-config\") || this.window.wtm.config_url;\n    this.lazyUrl = body.getAttribute(\"data-wtm-lazy\") || this.window.wtm.lazy_url;\n\n    this.requestInit = {\n      method: \"GET\",\n      mode: \"cors\",\n      cache: \"no-cache\",\n      credentials: \"same-origin\",\n      headers: {\n        \"Content-Type\": \"application/json; charset=utf-8\",\n        \"X-CSRFToken\": Cookies.get(\"csrftoken\"),\n      },\n      redirect: \"follow\",\n      referrer: \"no-referrer\",\n    };\n\n    this.showCookiebar = false;\n    this.initialize();\n  }\n\n  initialize() {\n    this.loadConfig(() => {\n      const cookie = Cookies.get(\"wtm\");\n      if (cookie) {\n        const items = cookie.split(\"|\");\n        items.map((item) => {\n          const parts = item.split(\":\", 2);\n          if (parts.length > 0) this.state[parts[0]] = parts[1];\n        });\n\n        this.validate();\n        this.loadData(null);\n      }\n    });\n  }\n\n  validate() {\n    // Verify the browser allows cookies.\n    let enabled = navigator.cookieEnabled;\n    if (!enabled) {\n      Cookies.set(\"wtm_verification\", \"verification\");\n      enabled = Cookies.get(\"wtm_verification\") !== undefined;\n    }\n\n    if (enabled) {\n      Object.keys(this.config.tag_types).forEach((tagType) => {\n        if (this.state[tagType] === \"unset\" || this.state[tagType] == \"none\") {\n          this.showCookiebar = true;\n        }\n      });\n    }\n\n    if (this.showCookiebar) {\n      new CookieBar(this);\n    }\n\n    if (this.config.triggers && this.config.triggers.length > 0) {\n      const { triggers } = this.config;\n      new TriggerMonitor(this, triggers);\n    }\n  }\n\n  loadConfig(callback?: Function) {\n    fetch(this.configUrl, this.requestInit)\n      .then((response) => response.json())\n      .then((json) => {\n        this.config = json;\n        if (callback) callback();\n      })\n      .catch((error) => {\n        console.error(error);\n      });\n  }\n\n  loadData(trigger: Trigger, callback?: Function) {\n    fetch(this.lazyUrl, {\n      ...this.requestInit,\n      method: \"POST\",\n      body: JSON.stringify({ ...window.location, trigger }),\n    })\n      .then((response) => response.json())\n      .then((json) => {\n        this.data = json;\n        this.handleLoad();\n        if (callback) callback();\n      })\n      .catch((error) => {\n        console.error(error);\n      });\n  }\n\n  handleLoad() {\n    this.data.tags.forEach((tag: Tag) => {\n      const element = document.createElement(tag.name);\n      for (let property in tag.attributes) {\n        if (tag.attributes.hasOwnProperty(property)) {\n          element.setAttribute(property, tag.attributes[property]);\n        }\n      }\n      element.appendChild(document.createTextNode(tag.string));\n      document.head.appendChild(element);\n    });\n  }\n}\n"],"sourceRoot":""}